<!-- Header Section -->
<header
	class="flex lg:flex-row flex-col lg:justify-between lg:items-center gap-4 py-6">
	<!-- Left: Name -->
	<a href="/" class="flex items-center space-x-2">
		<img src="{{ base_path ~ directory }}/images/cod3naut.png" alt="logo" class="w-auto h-10"/>
	</a>

	<!-- Right: Navigation and Social -->
	<div
		class="flex lg:flex-row flex-col lg:items-center gap-4 lg:gap-8">
		<!-- Navigation Links -->
		<nav class="flex gap-4 lg:gap-6"></nav>

		<!-- Social Icons -->
		<div class="flex gap-4">
			<a href="https://github.com/iknowmagic" target="_blank" class="hover:opacity-60 transition-opacity icon-default">
				<i data-lucide="github"></i>
			</a>
			<a href="https://linkedin.com/in/cod3naut" target="_blank" class="hover:opacity-60 transition-opacity icon-default">
				<i data-lucide="linkedin"></i>
			</a>
		</div>
	</div>
</header>

<div class="divider divider-neutral"></div>

<!-- Hero Section -->
<section class="py-4">
	<h1 class="heading-large">ILAN KAIM</h1>
</section>

<!-- Projects Grid Container -->
<section
	class="mb-32 lg:mb-50">
	<!-- Clean Grid using grid-inner plugin -->
	<div class="grid-inner-1 md:grid-inner-2 lg:grid-inner-3 border-2 border-black">
		<!-- ProjecCard -->
		{# 
																																																																																																																  ProjectCard Twig Component - Direct conversion from ProjectCard.svelte
																																																																																																																  Replace the simple project loop in your page--front.html.twig with this code
																																																																																																																#}

			{% if all_projects %}
				{% for project in all_projects %}
				{# Get project data - map Drupal fields to Svelte props #}
				{% set project_title = project.title.value %}
				{% set project_description = project.field_project_description.value %}
				{% set project_link = project.field_project_link.uri %}
				{% set project_github = project.field_project_github.uri %}

				{# Build project tags array #}
				{% set project_tags = [] %}
					{% if project.field_project_tags and not project.field_project_tags.isEmpty %}
						{% for tag_item in project.field_project_tags %}
					{% set project_tags = project_tags|merge([tag_item.value]) %}
				{% endfor %}
				{% endif %}

				{# Get first tag for badge display (matches Svelte getProjectTag function) #}
				{% set project_tag = project_tags[0] ?? 'featured' %}

				{# Get project image #}
				{% set project_image = project.field_project_image.entity.uri.value %}

				{# Get project features (if you have this field) #}
				{% set project_features = [] %}
					{% if project.field_project_features and not project.field_project_features.isEmpty %}
						{% for feature_item in project.field_project_features %}
					{% set project_features = project_features|merge([feature_item.value]) %}
				{% endfor %}
				{% endif %}

				{# Determine primary link (matches Svelte logic) #}
				{% set primary_link = project_link ?: project_github %}

				{# Check if link is external (matches Svelte isExternalLink logic) #}
				{% set is_external_link = primary_link and (primary_link starts with 'http' or primary_link starts with 'https') %}

				<!-- Project Card Section (matches Svelte structure exactly) -->
					<section class="relative"> {% if primary_link %}
						<a
							href="{{ primary_link }}" {% if is_external_link %} target="_blank" rel="noopener noreferrer" {% endif %} class="block hover:bg-gray-50 p-6 md:p-12 lg:p-10 pt-12 transition-colors" aria-label="View {{ project_title }} project">
							<!-- External Link Icon - positioned absolutely in top-right -->
							{% if is_external_link %}
								<div class="top-4 right-4 absolute text-gray-400">
									<i data-lucide="external-link" width="16" height="16"></i>
								</div>
							{% endif %}

							<!-- Card Navigation Section -->
							<div class="flex justify-end">
								<span class="bg-white hover:bg-black border border-default rounded-full badge-outline hover:text-white text-small transition-colors cursor-pointer badge">
									{{ project_tag|upper }}
								</span>
							</div>

							<!-- Project Image - Mobile First: my-4, md: my-5, lg: my-5 (20px spec) -->
							<div class="my-4 md:my-5 lg:my-5 w-full aspect-square overflow-hidden">
								{% if project_image %}
									<img src="{{ file_url(project_image) }}" alt="{{ project_title }}" class="w-full h-full object-cover">
								{% else %}
									<div class="flex justify-center items-center bg-gray-200 w-full h-full">
										<span class="text-gray-500">No image</span>
									</div>
								{% endif %}
							</div>

							<!-- Project Title -->
							<h3 class="heading-h4">
								{{ project_title }}
							</h3>

							<!-- Project Description - Mobile First: py-4 min-h-20, md: py-5 min-h-24, lg: py-5 min-h-25 (20px/100px spec) -->
							<div class="py-4 md:py-5 lg:py-5">
								{% if project_description %}
									<p class="text-default">
										{{ project_description }}
									</p>
								{% endif %}
							</div>

							<!-- Features - Mobile First: py-6, md: py-8, lg: py-10 (40px spec) -->
							<div class="py-6 md:py-8 lg:py-10">
								{% if project_features|length > 0 %}
									<span class="text-small-600">Features:
									</span>
									<span class="text-small">{{ project_features|join(', ') }}</span>
								{% endif %}
							</div>
						</a>
					{% else %}
						<!-- Fallback for projects without links (matches Svelte else block) -->
						<div
							class="p-6 md:p-8 lg:p-10">
							<!-- Card Navigation Section -->
							<div class="flex justify-end">
								<span class="bg-white border border-default rounded-full badge-outline text-small uppercase badge">
									{{ project_tag|upper }}
								</span>
							</div>

							<!-- Project Image -->
							<div class="my-4 md:my-5 lg:my-5 w-full aspect-square overflow-hidden">
								{% if project_image %}
									<img src="{{ file_url(project_image) }}" alt="{{ project_title }}" class="w-full h-full object-cover">
								{% else %}
									<div class="flex justify-center items-center bg-gray-200 w-full h-full">
										<span class="text-gray-500">No image</span>
									</div>
								{% endif %}
							</div>

							<!-- Project Title -->
							<h3 class="heading-h4">
								{{ project_title }}
							</h3>

							<!-- Project Description -->
							<div class="py-4 md:py-5 lg:py-5">
								{% if project_description %}
									<p class="text-default">
										{{ project_description }}
									</p>
								{% endif %}
							</div>

							<!-- Features -->
							<div class="py-6 md:py-8 lg:py-10">
								{% if project_features|length > 0 %}
									<span class="text-small-600">Features:
									</span>
									<span class="text-small">{{ project_features|join(', ') }}</span>
								{% endif %}
							</div>
						</div>
					{% endif %}
				</section>
			{% endfor %}
		{% endif %}
	</div>
</section>

<!-- Footer Section -->
<footer
	class="bg-black -mx-5 sm:-mx-7 md:-mx-8 lg:-mx-15 xl:-mx-15 px-5 sm:px-7 md:px-8 lg:px-15 xl:px-15 py-12 sm:py-15 lg:py-15 text-inverse">
	<!-- Main Footer Grid - Mobile First: 1 col, lg: 3 cols -->
	<div
		class="gap-6 lg:gap-8 grid grid-cols-1 lg:grid-cols-3">
		<!-- First section: Name -->
		<div>
			<img src="{{ base_path ~ directory }}/images/cod3naut.png" alt="logo" class="invert mb-4 w-48"/>
		</div>

		<!-- Second section: Projects by Category - Mobile First: py-6, md: py-8, lg: py-10 (40px spec) -->
		<div class="lg:col-span-2 py-6 md:py-8 lg:py-10">
			<div class="gap-4 grid grid-cols-1 sm:grid-cols-2">
				<div>
					<h4 class="mb-2 text-inverse text-small-600">Featured</h4>
					<ul class="space-y-1 text-inverse text-small">
						{% if featured_projects %}
							{% for project in featured_projects %}
								{% set project_link = project.field_project_link.uri %}
								{% set project_github = project.field_project_github.uri %}

								{% if project_link %}
									<p>
										<a href="{{ project_link }}" {% if project_link starts with 'http' %} target="_blank" rel="noopener noreferrer" {% endif %} class="hover:text-gray-300 transition-colors">
											{{ project.title.value }}
										</a>
									</p>
								{% elseif project_github %}
									<p>
										<a href="{{ project_github }}" target="_blank" rel="noopener noreferrer" class="hover:text-gray-300 transition-colors">
											{{ project.title.value }}
										</a>
									</p>
								{% else %}
									<p>{{ project.title.value }}</p>
								{% endif %}
							{% endfor %}
						{% endif %}
					</ul>
				</div>
				<div>
					<h4 class="mb-2 text-inverse text-small-600">Experiments</h4>
					<ul class="space-y-1 text-inverse text-small">
						{% if experiment_projects %}
							{% for project in experiment_projects %}
								{% set project_link = project.field_project_link.uri %}
								{% set project_github = project.field_project_github.uri %}

								{% if project_link %}
									<p>
										<a href="{{ project_link }}" {% if project_link starts with 'http' %} target="_blank" rel="noopener noreferrer" {% endif %} class="hover:text-gray-300 transition-colors">
											{{ project.title.value }}
										</a>
									</p>
								{% elseif project_github %}
									<p>
										<a href="{{ project_github }}" target="_blank" rel="noopener noreferrer" class="hover:text-gray-300 transition-colors">
											{{ project.title.value }}
										</a>
									</p>
								{% else %}
									<p>{{ project.title.value }}</p>
								{% endif %}
							{% endfor %}
						{% endif %}
					</ul>
				</div>
			</div>
		</div>
	</div>
</footer>
